(function(g,x){g.widget("ui.listview",g.extend({options:{theme:null,countTheme:null,dividerTheme:null,icon:"carat-r",splitIcon:"carat-r",splitTheme:null,corners:!0,shadow:!0,inset:!1},_create:function(){var a=this.options.inset?" ui-listview-inset":"";this.options.inset&&(a+=this.options.corners?" ui-corner-all":"",a+=this.options.shadow?" ui-shadow":"");this.element.addClass(" ui-listview"+a);this.element.parent().addClass("ui-widget");this.refresh(!0)},_findFirstElementByTagName:function(a,d,b,
c){var h={};for(h[b]=h[c]=!0;a;){if(h[a.nodeName])return a;a=a[d]}return null},_addThumbClasses:function(a){var d,b=a.length;for(d=0;d<b;d++){var c=g(this._findFirstElementByTagName(a[d].firstChild,"nextSibling","img","IMG"));c.length&&g(this._findFirstElementByTagName(c[0].parentNode,"parentNode","li","LI")).addClass(c.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")}},_getChildrenByTagName:function(a,d,b){var c=[],h={};h[d]=h[b]=!0;for(a=a.firstChild;a;)h[a.nodeName]&&c.push(a),a=a.nextSibling;
return g(c)},_getAttr:function(a,d){var b;(a=a.jquery?a[0]:a)&&a.getAttribute&&(b=a.getAttribute("data-"+d));try{b="true"===b?!0:"false"===b?!1:"null"===b?null:+b+""===b?+b:rbrace.test(b)?JSON.parse(b):b}catch(c){}return b},_beforeListviewRefresh:g.noop,_afterListviewRefresh:g.noop,refresh:function(a){var d,b=this.options,c=this.element,h=!!g.nodeName(c[0],"ol");var l=c.attr("start");var q={},u=c.find(".ui-li-count"),r=this._getAttr(c[0],"counttheme")||this.options.countTheme;r=r?"ui-body-"+r:"ui-body-inherit";
b.theme&&c.addClass("ui-group-theme-"+b.theme);h&&(l||0===l)&&(l=parseInt(l,10)-1,c.css("counter-reset","listnumbering "+l));this._beforeListviewRefresh();var p=this._getChildrenByTagName(c[0],"li","LI");l=0;for(d=p.length;l<d;l++){var f=p.eq(l);var m="";if(a||0>f[0].className.search(/\bui-li-static\b|\bui-li-divider\b/)){var e=this._getChildrenByTagName(f[0],"a","A");var k="list-divider"===this._getAttr(f[0],"role");var v=f.attr("value");var n=this._getAttr(f[0],"theme");if(e.length&&0>e[0].className.search(/\bui-btn\b/)&&
!k){n=this._getAttr(f[0],"icon");k=!1===n?!1:n||b.icon;e.removeClass("ui-link");n="ui-state-default ui-btn";if(1<e.length){m="ui-li-has-alt";k=e.last();var t=(t=this._getAttr(k[0],"theme")||b.splitTheme||this._getAttr(f[0],"theme",!0))?" ui-btn-"+t:"";var w=this._getAttr(k[0],"icon")||this._getAttr(f[0],"icon")||b.splitIcon;t="ui-btn ui-icon ui-icon-"+w+t;k.attr("title",g.trim(k.getEncodedText())).addClass(t).empty();e=e.first()}else k&&(n+=" ui-btn-icon-right ui-icon-"+k);e.addClass(n);this._hoverable(e);
this._focusable(e)}else k?(this._getAttr(f[0],"theme"),m="ui-li-divider ui-widget-header",f.attr("role","heading")):0>=e.length&&(m="ui-li-static ui-widget-content ui-body-"+(n?n:"inherit"));h&&v&&(e=parseInt(v,10)-1,f.css("counter-reset","listnumbering "+e))}q[m]||(q[m]=[]);q[m].push(f[0])}for(m in q)g(q[m]).addClass(m);u.each(function(){g(this).closest("li").addClass("ui-li-has-count")});r&&u.not("[class*='ui-body-']").addClass(r);this._addThumbClasses(p);this._addThumbClasses(p.find(".ui-btn"));
this._afterListviewRefresh();c.removeClass("ui-first-child ui-last-child");p.removeClass("ui-first-child ui-last-child");p.filter(":visible").eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child")}}))})(jQuery);